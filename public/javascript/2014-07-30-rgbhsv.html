<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>rgbhsv</title>
	<style>
		ul, li{margin: 0; padding: 0; display: block;}
		li{height: 20px; width: 50px;}


		li:nth-child(1){background-color: #000;}
		li:nth-child(2){background-color: #f00;}
		li:nth-child(3){background-color: #0f0;}
		li:nth-child(4){background-color: #00f;}
		li:nth-child(5){background-color: #ee0;}
		li:nth-child(6){background-color: #dd0;}
		li:nth-child(7){background-color: #cc0;}
		li:nth-child(8){background-color: #fefdd0;}
		li:nth-child(9){background-color: #fffddc;}
		li:nth-child(10){background-color: #000064;}
		li:nth-child(11){background-color: #fff;}
		li:nth-child(12){background-color: #f00;}
		li:nth-child(13){background-color: #f00;}
		li:nth-child(14){background-color: #f00;}
		li:nth-child(15){background-color: #f00;}
	</style>
</head>
<body>

<ul>
	<li>1</li>
	<li>2</li>
	<li>3</li>
	<li>4</li>
	<li>5</li>
	<li>6</li>
	<li>7</li>
	<li>8</li>
	<li>9</li>
	<li>10</li>
	<li>11</li>
	<li>12</li>
	<li>13</li>
	<li>14</li>
</ul>
	

	<script src="../js/2014-07-30-rgb-to-hsb.js"></script>
	<script>
		/**
	     *  @describe  遍历节点，每次遍历值为100个
	     */
	    var computedIndex = 0
	    function partNodesNight() {
	        var i = computedIndex;
	        var listTag = document.getElementsByTagName('*');
	        var maxIndex = computedIndex + 100;
	        for (; i < listTag.length && i < maxIndex; ++i) {
	            updateNodeNight(listTag[i]);
	        }
	        computedIndex = i;
	        if (computedIndex < listTag.length) {
	            window.setTimeout(partNodesNight, 1);
	        }
	    }

	    /**
	     *  @describe  完成当个节点的操作
	     */
	    function updateNodeNight(node) {
	        if (!node) return;
	        if (node.nodeType == 3 || node.nodeType == 8) return;
	        
	        var computedStyle = window.getComputedStyle(node, null);
	        if (computedStyle == null) {
	            return;
	        }

	        var rgb =  moon(computedStyle.backgroundColor);
	        if(rgb){
	        	var bgc = 'rgb(' + parseInt(rgb[0]) + ', ' + parseInt(rgb[1]) + ', ' + parseInt(rgb[2]) + ')';
	        	node.style.backgroundColor = bgc;
	        }
	    }

	    window.onload = function(){
	    	partNodesNight();
	    }



	</script>
</body>
</html>